
<!DOCTYPE html>
<html>
<head>
    <!--JD CMPT350 Project: Free Classifieds in Saskatoon. Find a job, buy a car, find a house or apartment, furniture, appliances and more!-->
    <title>JD CMPT350 Project</title>
    <link rel="shortcut icon" type="image/x-icon" href="Images/favicon.ico" />

    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.structure.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.structure.min.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.theme.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.theme.min.css">
    <link rel="stylesheet" type="text/css" href="styling.css">

    <script type="javascript">
        //todo find new flashy image for title of website
        //todo go through css's and filter out the crap
        //todo get icons for categories
    </script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="arrayDB.js"></script>
</head>

<body>

<header>
    <div id="TopHeader">
        <div id="HeaderLeft">
            <a href="index.html"><image src="Images/favicon.ico"></image></a>
        </div>
        <div id="HeaderRight">
            <ul id="HeaderRightTop">
                <li><a href="signIn.html" rel="nofollow">Sign In<span style="padding-right: 50px"></span></a></li>
                <li><a href="register.html" rel="nofollow">Register<span style="padding-right: 30px"></span></a></li>
            </ul>
            <div id="HeaderRightBottom">
                <a class="button-header-nav first" href="postAd.html" rel="nofollow">
                    <strong>Post Ad</strong></a><a class="button-header-nav last" href="myProfile.html" rel="nofollow">
                My Profile</a>
            </div>
        </div>
    </div>

    <div id="HeaderBar">
    </div>
</header>

<div data-role="content">
    <section style="width: 50%; float: left">
        <form onsubmit="signIn()">
            <fieldset>
                <legend><strong>Sign-In:</strong></legend>

                <label>
                    <strong>Username: </strong>
                    <input type="text" required id="username">
                </label>
                <br>
                <label>
                    <strong>Password: </strong>
                    <input type="password" required id="password">
                </label>
                <br>
                <a onclick="newPopup()" href="">Forgot Password?</a>
                <br>
                <label for="remainSignedIn"><input type="checkbox" id="remainSignedIn" value="false">Keep me signed in</label>
                <br>
                <input type="submit">
            </fieldset>
        </form>
    </section>
    <section style="width: 50%; float: right">
        <form action="register.html">
            <fieldset>
                <legend><strong>Not Registered Yet?</strong></legend>
                <br><h3>Register Now</h3>
                <a hidden="hidden"></a><br>
                <input type="submit" value="Register Now!!">
            </fieldset>
        </form>
    </section>
</div>

<div id="LayoutFooter">
    <footer>
        <div id="FooterBottom">
            <section style="min-width: 33%; max-width:50%; padding-left: 20%;">
                <ul style="list-style-type: none">
                    <li>
                        <image style="cursor:pointer" onclick="window.open('https://www.facebook.com/AnotherSchoolProject')" src="Images/fbook.png"></image>
                        <a href="https://www.facebook.com/AnotherSchoolProject" target="_blank" rel="nofollow">Friend us on Facebook</a>
                    </li>
                </ul>
            </section>
            <section style="min-width: 33%; max-width:50%;">
                <ul style="list-style-type: none">
                    <li>
                        <!--suppress XmlUnboundNsPrefix -->
                        <fb:like style="vertical-align: -33px" href="https://www.facebook.com/AnotherSchoolProject" send="false" width="60" show_faces="false"></fb:like>
                    </li>
                </ul>
            </section>
        </div>
    </footer>
</div>
<script type=text/javascript>

    (function(d, s, id)
    {                   // like on facebook
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;

        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";

        fjs.parentNode.insertBefore(js, fjs);
    }(document, "script", 'facebook-jssdk'));

    // Popup window code
    function newPopup()
    {
        window.open(
                "forgotPass.html",
                'popUpWindow',
                'height=150,width=550,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes'
        );
    }
    function signIn()
    {
        var username = document.getElementById('username').value;
        var password = document.getElementById('password').value;
        var table = DB[1], pass = table[2];
//      todo check if username exists in the database
        var index = checkUserName(username);
        if(index || index == 0)
//          todo get index of the user check if that password matches
            if(checkPassword(password, index))
            {
                if(document.getElementById('remainSignedIn').checked)     {}
//                    setCookie('username', username, 365);             // set cookie for 365 days  (1 year)
//                else
//                    setCookie('username', username, 0.041667);        //set cookie for 1 hour
                                                                        //start session instead of cookie
                window.open('myProfile.html','_self');
            }
            else
                alert("Password is incorrect"+password+' '+pass[index]);
        else
            alert("Username doesn't exist");
    }
    function checkUserName(username)
    {
        var table = DB[1];
        var array = table[1];
        for(var i = 0; i < array.length; i++)
            if (username == array[i])
            {alert(username +' '+ array[i]);
                return i;
            }
        return false;
    }
    function checkPassword(password, index)
    {
        var table = DB[1];
        var array = table[2];

        return password == array[index];
    }
</script>

</body>
</html>