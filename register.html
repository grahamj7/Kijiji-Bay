
<!DOCTYPE html>
<html>
<head>
    <!--Kijiji-Bay: Free Classifieds in Saskatoon. Find a job, buy a car, find a house or apartment, furniture, appliances and more!-->
    <title>Kijiji-Bay</title>
    <link rel="shortcut icon" type="image/x-icon" href="Images/favicon.ico" />

    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.structure.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.structure.min.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.theme.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile.custom.theme.min.css">
    <link rel="stylesheet" type="text/css" href="styling.css">

    <script type="text/javascript" src="jquery/jquery.mobile.custom.js"></script>
    <script type="text/javascript" src="jquery/jquery.mobile.custom.min.js"></script>
    <script type="javascript">
        //todo find new flashy image for title of website
        //todo go through css's and filter out the crap
        //todo get icons for categories
    </script>
</head>

<body>
<script type="text/javascript" src="index.js"></script>
<script type="text/javascript" src="arrayDB.js"></script>

<header>
    <div id="TopHeader">
        <div id="HeaderLeft">
            <a href="index.html"><image src="Images/favicon.ico"></image></a>
        </div>
        <div id="HeaderRight">
            <ul id="HeaderRightTop">
                <li><a href="signIn.html" rel="nofollow">Sign In<span style="padding-right: 50px"></span></a></li>
                <li><a href="register.html" rel="nofollow">Register<span style="padding-right: 30px"></span></a></li>
            </ul>
            <div id="HeaderRightBottom">
                <a class="button-header-nav first" href="postAd.html" rel="nofollow">
                    Post Ad <strong>FREE</strong></a><a class="button-header-nav last" href="myProfile.html" rel="nofollow">
                My Cart</a>
            </div>
        </div>
    </div>

    <div id="HeaderBar">
    </div>
</header>

<div data-role="content">
    <h1>Register</h1>
    <div>
        <label for="fName">First Name: <input name="form" type="text" id="fName"></label><br>
        <label for="lName">Last Name: <input name="form" type="text" id="lName"></label><br>
        <label for="username">Username: <input type="text" name="form" id="username"></label><br>
        <label for="Opass">Password: <input type="password" name="form" id="Opass"></label><br>
        <label for="Cpass">Confirm Password: <input type="password" name="form" id="Cpass"></label><br>
        <label for="age">Age ex.18: <input type="number" id="age" name="form" min="1"></label><br>
        <label for="email">Email: <input type="email" name="form" id="email"></label><br>
        <label for="phone">Phone Number ex.555-123-4567: <input name="form" type="tel" id="phone"></label><br>
        <label for="address">Address: <input type="text" name="form" id="address"></label><br>
        <label for="city">City: <input type="text" name="form" id="city"></label><br>
        <label for="prov">Province: </label>
        <select id="prov" name="form">
            <option></option>
            <option>BC</option>
            <option>AB</option>
            <option>SK</option>
            <option>MB</option>
            <option>ON</option>
            <option>QC</option>
            <option>NS</option>
            <option>PE</option>
            <option>NB</option>
            <option>NL</option>
            <option>YT</option>
            <option>NW</option>
            <option>NU</option>
        </select><br>
        <label for="postal">Postal Code ex.A1B2C3: <input type="text" name="form" id="postal"></label><br><br>
        <button onclick="submit()">Submit</button>
    </div>
</div>

<div id="LayoutFooter">
    <footer>
        <div id="FooterBottom">
            <section style="min-width: 33%; max-width:50%; padding-left: 20%;">
                <ul style="list-style-type: none">
                    <li>
                        <image style="cursor:pointer" onclick="window.open('https://www.facebook.com/AnotherSchoolProject')" src="Images/fbook.png"></image>
                        <a href="https://www.facebook.com/AnotherSchoolProject" target="_blank" rel="nofollow">Friend us on Facebook</a>
                    </li>
                </ul>
            </section>
            <section style="min-width: 33%; max-width:50%;">
                <ul style="list-style-type: none">
                    <li>
                        <!--suppress XmlUnboundNsPrefix -->
                        <fb:like style="vertical-align: -33px" href="https://www.facebook.com/AnotherSchoolProject" send="false" width="60" show_faces="false"></fb:like>
                    </li>
                </ul>
            </section>
        </div>
    </footer>
</div>
<script type="text/javascript">
        (function(d, s, id)
        {                   // like on facebook
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;

            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";

            fjs.parentNode.insertBefore(js, fjs);
        }(document, "script", 'facebook-jssdk'));

    var labels = document.getElementsByTagName('label');
    for (var i = 0; i < labels.length; i++) {
        if (labels[i].htmlFor != '') {
            var elem = document.getElementById(labels[i].htmlFor);
            if (elem)
                elem.label = labels[i];
        }
    }

    function checkPostal()
    {
        var postal = document.getElementById('postal').value;
        var pattern2 = /[a-z][0-9][a-z][0-9][a-z][0-9]/i;

        return pattern2.test(postal);
    }
    function checkPhone()
    {
        var phone = document.getElementById('phone').value;
        var pattern1 = new RegExp('[0-9]{3}-[0-9]{3}-[0-9]{4}');
        return pattern1.test(phone);
    }
    function check()
    {
        var all = document.getElementsByName('form');
        for (var i = 0; i < all.length; i++)
            if (all[i].value == '' )
                return 'Please fill in box: '+document.getElementById(all[i].id).label.textContent;

        if(checkUsername())
            if(validatePassword())
                if (checkPhone())
                    if(checkPostal())
                        return null;
                    else
                        return 'Please enter a valid Postal Code';
                else
                    return 'Please enter a valid Phone Number';
            else
                return 'Passwords do not match';
        else
            return 'Username is taken. Please try again';
    }
    function submit()
    {
        var message = check();
        if(!message)
            insertUser();
        else
            alert(message);
    }
    function checkUsername()
    {
        var users = userTable[1];
        var username = document.getElementById('username').value;
        for(var i = 0; i < users.length; i++)
            if (username == users[i])
                return false;
        return true;
    }
    function validatePassword()
    {
        var pass = document.getElementById('Opass').value;
        var Cpass = document.getElementById('Cpass').value;
        return pass == Cpass;
    }
    function insertUser()
    {
        var fName = document.getElementById('fName').value;
        var lName = document.getElementById('lName').value;
        var username = document.getElementById('username').value;
        var password = document.getElementById('Opass').value;
        var age = document.getElementById('age').value;
        var email = document.getElementById('email').value;
        var phone = document.getElementById('phone').value;
        var address = document.getElementById('address').value;
        var city = document.getElementById('city').value;
        var prov = document.getElementById('prov').value;
        var postal = document.getElementById('postal').value;

        // todo insert into database

        window.open('myProfile.html','_self');
    }
</script>

</body>
</html>
